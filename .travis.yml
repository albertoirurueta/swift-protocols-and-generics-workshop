language: objective-c
osx_image: xcode8.1
env:
  global:
    - secure: "W4dz3mJ2fjh6xnqMtYKRZDzsYNARCO14qY8xvbu5lKU63sNqVeuEutjdkKDdxQVCFt8adLdxVqwFpqr/OHSXDbXMaoC2Xm8mnIU3Fjs6N0rCAsYCW8OdRPmEa97EYYrs02j6u0Sm78AyXVDDbCdhmfRXWwHdZaHcvagOBj0NeeMOqUUeYudkR6p79S1l9vFokLtrrqFpDitI4XKttExA+cxuet2PTLYxVJMPgvNoPHFgQMUCduWXzo5cik5JkYcmgxOovMrhzkP+h4r1Qbz/vNyn1RRSReZXKaHOoU+gq+ozc9dunnUhASbRhRkbqN/bW8mLvpNrDCEM7BNt1AidqBqGrFkdnNIPIz9pNyq7zNEq8LmbnvpI3Ugowv6w1yi6/dFfp1VooPBP0kWAlASqYcEjKAiGndz14ym9S0onq0SX0wg61fdu/NoygIdSxA5FUbONXaOtAL2SmKtnQsl9gzgUoyGukgWRWQI+Vl2cyJwfd3wx+tvhTQWRz4eUsemYjwieTQXl+S4bMYp1tf/1UCWs6vXw0Osj4tN5WPuAXfpZ0fW5i1BOglp7Zz2jaZHg7Z8qJt13j2j20H75MZ6NdgwIbzeUggiPBb8Bs5YE5cuSjz94KMIiwD6M9nhQgbX1dtBSj2s2YV04/C9+SH1s09uyXbdJeGEjaSSdrCtmYEY="
    - ENCRYPTION_LABEL: "0d0cc787d66b"
    - COMMIT_AUTHOR_EMAIL: "alberto@irurueta.com"

#cache: cocoapods
before_install:
  #- gem install cocoapods --no-ri --no-rdoc
  - gem install slather --no-ri --no-rdoc
  - gem install jazzy --no-ri --no-rdoc
  - gem install xcpretty --no-ri --no-rdoc
script:
  - set -o pipefail && xcodebuild clean test -project ./swiftProtocolsAndGenerics/swiftProtocolsAndGenerics.xcodeproj -scheme swiftProtocolsAndGenerics -destination 'platform=iOS Simulator,name=iPhone 7' TEST_AFTER_BUILD=YES -configuration Debug -enableCodeCoverage=YES | tee xcodebuild.log | xcpretty -r html
  #- xcodebuild clean test -project ./swiftProtocolsAndGenerics/swiftProtocolsAndGenerics.xcodeproj -scheme swiftProtocolsAndGenerics -destination 'platform=iOS Simulator,name=iPhone 7' TEST_AFTER_BUILD=YES -configuration Debug -enableCodeCoverage=YES
  #- slather
  - ./publish-gh-pages.sh
after_success:
  - cd $TRAVIS_BUILD_DIR && slather
  

